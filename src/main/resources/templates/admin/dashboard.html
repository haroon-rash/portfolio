<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" data-bs-theme="dark">

<head>
    <meta charset="UTF-8">
    <title>Admin Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">
</head>

<body>

    <div class="container py-5">
        <div th:if="${success}" class="alert alert-success alert-dismissible fade show" role="alert">
            <span th:text="${success}"></span>
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>

        <div class="d-flex justify-content-between mb-4">
            <h1>Admin Dashboard</h1>
            <div>
                <a href="/" class="btn btn-outline-primary" target="_blank">View Live Site</a>
                <form th:action="@{/logout}" method="post" class="d-inline">
                    <button type="submit" class="btn btn-outline-danger">Logout</button>
                </form>
            </div>
        </div>

        <!-- Hero Section -->
        <div class="card mb-4">
            <div class="card-header">Hero Section</div>
            <div class="card-body">
                <form th:action="@{/admin/hero/update}" method="post"
                    th:object="${hero != null ? hero : new com.haroon.portfolio.model.HeroSection()}">
                    <input type="hidden" name="id" th:value="${hero.id}">
                    <div class="mb-3">
                        <label>Name</label>
                        <input type="text" name="name" class="form-control" th:value="${hero.name}">
                    </div>
                    <div class="mb-3">
                        <label>Title</label>
                        <input type="text" name="title" class="form-control" th:value="${hero.title}">
                    </div>
                    <div class="mb-3">
                        <label>Description</label>
                        <textarea name="description" class="form-control" rows="3"
                            th:text="${hero.description}"></textarea>
                    </div>
                    <div class="mb-3">
                        <label>GitHub URL</label>
                        <input type="text" name="githubUrl" class="form-control" th:value="${hero.githubUrl}">
                    </div>
                    <div class="mb-3">
                        <label>LinkedIn URL</label>
                        <input type="text" name="linkedinUrl" class="form-control" th:value="${hero.linkedinUrl}">
                    </div>
                    <div class="mb-3">
                        <label>LeetCode URL</label>
                        <input type="text" name="leetcodeUrl" class="form-control" th:value="${hero.leetcodeUrl}">
                    </div>
                    <div class="mb-3">
                        <label>Email</label>
                        <input type="text" name="email" class="form-control" th:value="${hero.email}">
                    </div>
                    <button type="submit" class="btn btn-primary">Save Hero Section</button>
                </form>
            </div>
        </div>

        <!-- Contact Info -->
        <div class="card mb-4">
            <div class="card-header">Contact Info</div>
            <div class="card-body">
                <form th:action="@{/admin/contact/update}" method="post"
                    th:object="${contact != null ? contact : new com.haroon.portfolio.model.ContactInfo()}">
                    <input type="hidden" name="id" th:value="${contact.id}">
                    <div class="mb-3">
                        <label>Email</label>
                        <input type="text" name="email" class="form-control" th:value="${contact.email}">
                    </div>
                    <div class="mb-3">
                        <label>Phone</label>
                        <input type="text" name="phone" class="form-control" th:value="${contact.phone}">
                    </div>
                    <div class="mb-3">
                        <label>GitHub URL</label>
                        <input type="text" name="githubUrl" class="form-control" th:value="${contact.githubUrl}">
                    </div>
                    <div class="mb-3">
                        <label>LinkedIn URL</label>
                        <input type="text" name="linkedinUrl" class="form-control" th:value="${contact.linkedinUrl}">
                    </div>
                    <button type="submit" class="btn btn-primary">Save Contact Info</button>
                </form>
            </div>
        </div>

        <!-- Stats -->
        <div class="card mb-4">
            <div class="card-header d-flex justify-content-between align-items-center">
                <span>Stats</span>
                <a href="/admin/stats/new" class="btn btn-sm btn-success">Add Stat</a>
            </div>
            <div class="card-body">
                <table class="table">
                    <thead>
                        <tr>
                            <th>Count</th>
                            <th>Label</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="stat : ${stats}">
                            <td th:text="${stat.count}"></td>
                            <td th:text="${stat.label}"></td>
                            <td>
                                <a th:href="@{/admin/stats/edit/{id}(id=${stat.id})}"
                                    class="btn btn-sm btn-warning">Edit</a>
                                <a th:href="@{/admin/stats/delete/{id}(id=${stat.id})}" class="btn btn-sm btn-danger"
                                    onclick="return confirm('Delete?')">Delete</a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Projects -->
        <div class="card mb-4">
            <div class="card-header d-flex justify-content-between align-items-center">
                <span>Projects</span>
                <a href="/admin/projects/new" class="btn btn-sm btn-success">Add Project</a>
            </div>
            <div class="card-body">
                <table class="table">
                    <thead>
                        <tr>
                            <th>Title</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="project : ${projects}">
                            <td th:text="${project.title}"></td>
                            <td>
                                <a th:href="@{/admin/projects/edit/{id}(id=${project.id})}"
                                    class="btn btn-sm btn-warning">Edit</a>
                                <a th:href="@{/admin/projects/delete/{id}(id=${project.id})}"
                                    class="btn btn-sm btn-danger" onclick="return confirm('Delete?')">Delete</a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Skills -->
        <div class="card mb-4">
            <div class="card-header d-flex justify-content-between align-items-center">
                <span>Skills</span>
                <a href="/admin/skills/new" class="btn btn-sm btn-success">Add Skill</a>
            </div>
            <div class="card-body">
                <table class="table">
                    <thead>
                        <tr>
                            <th>Category</th>
                            <th>Items</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="skill : ${skills}">
                            <td th:text="${skill.category}"></td>
                            <td th:text="${skill.items}"></td>
                            <td>
                                <a th:href="@{/admin/skills/edit/{id}(id=${skill.id})}"
                                    class="btn btn-sm btn-warning">Edit</a>
                                <a th:href="@{/admin/skills/delete/{id}(id=${skill.id})}" class="btn btn-sm btn-danger"
                                    onclick="return confirm('Delete?')">Delete</a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>